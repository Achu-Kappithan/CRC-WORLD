<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login Page</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>
  <body>
    <div
      class="container-fluid vh-100 d-flex justify-content-center align-items-center p-0"
    >
      <div class="row g-0 w-100 h-100">
        <!-- Left Side Image Section -->
        <div class="col-lg-6 col-md-12 d-flex position-relative p-0 h-100">
          <img
            src="/assets/images/crc/reset.jpg"
            alt="Cricket Background"
            class="img-fluid w-100 h-100 object-cover"
          />
          <div
            class="position-absolute overlay d-flex flex-column align-items-center justify-content-center w-100 h-100 text-center text-white"
          >
            <h1>Welcome to Cricket World</h1>
            <p>Your journey begins here</p>
          </div>
        </div>

        <!-- Right Side Form Section -->
        <div
          class="col-lg-6 col-md-12 d-flex justify-content-center align-items-center bg-light h-100"
        >
          <div class="card shadow-lg p-4" style="max-width: 400px; width: 100%">
            <form
              class="login-form"
              method="post"
              onsubmit="return validateForm()"
              action="/update_password/<%= token %>"
            >
              <h2 class="text-center mb-4">Reset Password</h2>

              <div class="mb-3">
                <% if ((errorMessage.length > 0)) { %>
                <div class="alert alert-danger">
                  <p><%= errorMessage %></p>
                </div>
                <% } %> <% if ((successMessage.length > 0)) { %>
                <div class="alert alert-success">
                  <p><%= successMessage %></p>
                </div>
                <% } %>

                <label for="password" class="form-label">Password</label>
                <input
                  type="password"
                  class="form-control"
                  id="password"
                  name="newPassword"
                  placeholder="Enter new password"
                />
                <span id="passwordError" class="text-danger"></span>
              </div>

              <div class="mb-3">
                <label for="cpassword" class="form-label"
                  >Confirm Password</label
                >
                <input
                  type="password"
                  class="form-control"
                  id="cpassword"
                  name="user_password"
                  placeholder="Re-Enter password"
                />
                <span id="cpasswordError" class="text-danger"></span>
              </div>

              <button type="submit" class="btn btn-primary w-100">
                Submit
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      function validateForm() {
        let valid = true;

        document.getElementById("passwordError").textContent = "";
        document.getElementById("cpasswordError").textContent = "";

        const password = document.getElementById("password").value;
        if (password.length < 6) {
          document.getElementById("passwordError").textContent =
            "Password must be at least 6 characters long.";
          valid = false;
        }

        const cpassword = document.getElementById("cpassword").value;
        if (password !== cpassword) {
          document.getElementById("cpasswordError").textContent =
            "Passwords do not match.";
          valid = false;
        }

        return valid;
      }
    </script>
  </body>
</html>
